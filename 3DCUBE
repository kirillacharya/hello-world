
#include "TXLib.h"

//-----------------------------------------------------------------------------

void TDLine (double x1, double y1, double z1, double x2, double y2, double z2);

//-----------------------------------------------------------------------------

int main()
    {
    txCreateWindow (800, 600);

    double z = 0;

    while ( !GetAsyncKeyState ( VK_ESCAPE ) )
        {

        txSetFillColor(TX_BLACK);
        txClear();

        txSetColor (TX_WHITE, 10);

        TDLine (400, 200, 2- z, 600, 200, 2 - z);
        TDLine (400, 200, 2- z, 400, 400, 2 - z);
        TDLine (400, 400, 2- z, 600, 400, 2 - z);
        TDLine (600, 200, 2- z, 600, 400, 2 - z);

        TDLine (400, 200, 1, 600, 200, 1);
        TDLine (400, 200, 1, 400, 400, 1);
        TDLine (400, 400, 1, 600, 400, 1);
        TDLine (600, 200, 1, 600, 400, 1);

        TDLine (400, 200, 1, 400, 200, 2- z);
        TDLine (400, 400, 1, 400, 400, 2- z);
        TDLine (600, 400, 1, 600, 400, 2- z);
        TDLine (600, 200, 1, 600, 200, 2- z);

        if (GetAsyncKeyState ( VK_UP ) && z < 1)
            {
            z += 0.01;
            printf ( "%f", z );
            }

        if (GetAsyncKeyState ( VK_DOWN ))
            {
            z -= 0.01;
            printf ( "%f", z );
            }

        txSleep(0);
        }

    return 0;
    }

//-----------------------------------------------------------------------------

void TDLine (double x1, double y1, double z1, double x2, double y2, double z2)
    {
    txLine ( x1/z1, y1/z1, x2/z2, y2/z2 );
    }
